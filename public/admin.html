<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Collabsphere</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header><h1>Admin Panel</h1></header>
    <main>
        <h2>Pending Projects</h2>
        <div id="pendingProjects"></div>
    </main>

    <script>
        async function loadPending(){
            const res = await fetch('/admin/projects');
            const projects = await res.json();
            const container = document.getElementById('pendingProjects');
            container.innerHTML = '';
            projects.forEach(p => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <h3>${p.title} by ${p.owner_name}</h3>
                    <p>${p.description}</p>
                    <button onclick="approve(${p.id})">Approve</button>
                    <button onclick="reject(${p.id})">Reject</button>
                    <hr>
                `;
                container.appendChild(div);
            });
        }

        async function approve(id){
            await fetch('/admin/projects/approve', {
                method: 'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({ projectId: id })
            });
            loadPending();
        }

        async function reject(id){
            await fetch('/admin/projects/reject', {
                method: 'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({ projectId: id })
            });
            loadPending();
        }

        loadPending();
    </script>
</body>
</html>
